<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axborot Xavfsizligi - Interaktiv Test</title>
    <style>
        :root { --primary: #2c3e50; --success: #27ae60; --error: #e74c3c; --bg: #f4f7f6; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding: 15px; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: var(--primary); font-size: 22px; }
        .question-card { margin-bottom: 20px; padding: 15px; border: 1px solid #eee; border-radius: 12px; }
        .options { list-style: none; padding: 0; }
        .options li { margin-bottom: 10px; }
        
        /* Tugma ko'rinishi */
        .opt-btn { 
            width: 100%; padding: 12px; text-align: left; 
            background: #fff; border: 2px solid #f0f0f0; 
            border-radius: 8px; cursor: pointer; font-size: 15px;
            transition: 0.3s;
        }

        /* To'g'ri javob stili */
        .correct { background-color: #d4edda !important; border-color: var(--success) !important; color: #155724; font-weight: bold; }
        
        /* Xato javob stili */
        .wrong { background-color: #f8d7da !important; border-color: var(--error) !important; color: #721c24; }
        
        /* Bosilgandan keyin boshqa tugmalarni o'chirish */
        .disabled { pointer-events: none; opacity: 0.8; }

        #final-res { display: none; text-align: center; margin-top: 20px; padding: 20px; border-top: 2px dashed #eee; }
    </style>
</head>
<body>

<div class="container">
    <h1>Axborot Xavfsizligi Testi</h1>
    <div id="quiz-content"></div>
    
    <div id="final-res">
        <h3>Test yakunlandi!</h3>
        <p id="total-score" style="font-size: 24px; font-weight: bold; color: var(--success);"></p>
        <button onclick="location.reload()" style="padding: 10px 20px; cursor: pointer;">Qayta boshlash</button>
    </div>
</div>

<script>
var questions = [
    { q: "Vaqt asosida ko'r-ko'rona SQL in'ektsiyasi nima?", a: "Tizim ishini to'xtatib turuvchi (SLEEP) inyeksiya.", b: "Xatoliklar asosida ma'lumot o'g'irlash.", c: "Faqat parolni buzish.", correct: "a" },
    { q: "SQL-da protseduralarni bajarish ruxsati?", a: "RUN", b: "EXECUTE", c: "START", correct: "b" },
    { q: "MBBT xavfsizligining 3 ta asosiy jihati?", a: "Tezlik, xotira, dizayn", b: "Kirish, chiqish, o'chirish", c: "Konfidentsiallik, butunlik, mavjudlik", correct: "c" }
    // Qolgan savollarni ham shu formatda (correct: "a", "b" yoki "c") qo'shing
];

var score = 0;
var answeredCount = 0;

function initQuiz() {
    var container = document.getElementById('quiz-content');
    var html = "";
    
    for (var i = 0; i < questions.length; i++) {
        var q = questions[i];
        html += '<div class="question-card" id="q-card-'+i+'">';
        html += '<p><strong>' + (i+1) + '. ' + q.q + '</strong></p>';
        html += '<div class="options">';
        html += '<button class="opt-btn" onclick="checkAnswer(this, \'a\', '+i+')">' + q.a + '</button><br><br>';
        html += '<button class="opt-btn" onclick="checkAnswer(this, \'b\', '+i+')">' + q.b + '</button><br><br>';
        html += '<button class="opt-btn" onclick="checkAnswer(this, \'c\', '+i+')">' + q.c + '</button>';
        html += '</div></div>';
    }
    container.innerHTML = html;
}

function checkAnswer(btn, choice, qIdx) {
    var card = document.getElementById('q-card-' + qIdx);
    var allBtns = card.getElementsByClassName('opt-btn');
    var correctChoice = questions[qIdx].correct;

    // Barcha tugmalarni o'chirish (bir marta bosish mumkin)
    for (var i = 0; i < allBtns.length; i++) {
        allBtns[i].classList.add('disabled');
        // To'g'ri javobni har doim yashil qilish
        if ((i === 0 && correctChoice === 'a') || (i === 1 && correctChoice === 'b') || (i === 2 && correctChoice === 'c')) {
            allBtns[i].classList.add('correct');
        }
    }

    // Agar bosilgan javob xato bo'lsa, uni qizil qilish
    if (choice !== correctChoice) {
        btn.classList.add('wrong');
    } else {
        score++;
    }

    answeredCount++;
    if (answeredCount === questions.length) {
        showFinalResult();
    }
}

function showFinalResult() {
    document.getElementById('final-res').style.display = 'block';
    document.getElementById('total-score').innerText = "Natija: " + score + " / " + questions.length;
}

window.onload = initQuiz;
</script>
</body>
</html>
